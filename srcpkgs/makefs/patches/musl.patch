diff --git a/src/sys/sys/compat.h b/src/sys/sys/compat.h
index 9b72200..b6ba58f 100644
--- a/src/sys/sys/compat.h
+++ b/src/sys/sys/compat.h
@@ -25,6 +25,16 @@
  * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#include <sys/types.h>
+#include <byteswap.h>
+#if !defined(__GLIBC__)
+#define loff_t off_t	/* musl libc <fcntl.h> defines this for _GNU_SOURCE */
+#define daddr_t int	/* __kernel_daddr_t defined in linux/asm-generic/posix_types.h */
+#endif
+#ifndef ALLPERMS
+#define ALLPERMS (S_ISUID|S_ISGID|S_ISVTX|S_IRWXU|S_IRWXG|S_IRWXO)/* 07777 */
+#endif
+
 #ifndef _MAKEFS_COMPAT_H
 #define _MAKEFS_COMPAT_H
 
