# Template file for 'dmenu-swc'
pkgname=dmenu-swc
version=0.0.20170417
revision=1
_githash=f385d9d18813071b4b4257bf8d4d572daeda0e70
build_style=gnu-makefile
make_use_env=yes
hostmakedepends="pkg-config wayland-devel"
makedepends="pixman-devel fontconfig-devel libdrm-devel wayland-devel
 libxkbcommon-devel wld-devel swc-devel"
short_desc="Generic menu for Wayland using wld and swc panels"
maintainer="hazen2215 <haz@disroot.org>"
license="MIT"
homepage="https://github.com/michaelforney/dmenu"
distfiles="https://github.com/michaelforney/dmenu/archive/${_githash}.tar.gz"
checksum=da9b3b155337a8019e784e4b6385e0550bf4abee522fa06d0180958004dc3278

post_patch() {
	vsed -i -e 's/dmenu/dmenu-swc/g' dmenu_run
}

pre_build() {
	[ -e ${FILESDIR}/config.h ] && cp ${FILESDIR}/config.h config.h ||:
}

post_install() {
	mv ${DESTDIR}/usr/bin/{dmenu,dmenu-swc}
	mv ${DESTDIR}/usr/bin/{dmenu_path,dmenu-swc_path}
	mv ${DESTDIR}/usr/bin/{dmenu_run,dmenu-swc_run}
	mv ${DESTDIR}/usr/bin/{stest,stest-swc}
	mv ${DESTDIR}/usr/share/man/man1/{dmenu,dmenu-swc}.1
	mv ${DESTDIR}/usr/share/man/man1/{stest,stest-swc}.1
	vlicense LICENSE
}
