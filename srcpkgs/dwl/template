# Template file for 'dwl'
pkgname=dwl
version=0.7
revision=1
build_style=gnu-makefile
make_use_env=yes
hostmakedepends="pkg-config wayland-devel"
makedepends="wlroots0.18-devel"
depends="$(vopt_if xwayland xorg-server-xwayland)"
short_desc="Simple, hackable dynamic tiling Wayland compositor (dwm for Wayland)"
maintainer="hazen2215 <haz@disroot.org>"
license="GPL-3.0-only, MIT, CC0-1.0"
homepage="https://codeberg.org/dwl/dwl"
distfiles="https://codeberg.org/dwl/dwl/archive/${version}.tar.gz"
checksum=066d465b0fb89f86871708bb2e37d3bde04e54cf1573d19b53e7fe61b971c958

build_options="xwayland"
build_options_default="xwayland"
desc_option_xwayland="Enable Xwayland support"

pre_build() {
	[ -e ${FILESDIR}/config.h ] && cp ${FILESDIR}/config.h config.h
	if [ "$build_option_xwayland" ]; then
		vsed -i config.mk -e '/^#XWAYLAND/s/^#//' -e '/^#XLIBS/s/^#//'
	fi
}

post_install() {
	vlicense LICENSE.dwm
}
