reverts https://repo.palemoon.org/MoonchildProductions/UXP/commit/f9e0ed984903b12e64ac943b2cee3340a8aa9c4e
--- b/platform/media/libcubeb/src/cubeb_sndio.c
+++ a/platform/media/libcubeb/src/cubeb_sndio.c
@@ -42,35 +42,18 @@
   uint64_t wrpos;		  /* number of written frames */
   cubeb_data_callback data_cb;    /* cb to preapare data */
   cubeb_state_callback state_cb;  /* cb to notify about state changes */
-  float volume;                   /* current volume */
   void *arg;			  /* user arg to {data,state}_cb */
 };
 
-
-static void
-s16_setvol(void *ptr, long nsamp, float volume)
-{
-  int16_t *dst = ptr;
-  int32_t mult = volume * 32768;
-  int32_t s;
-
-  while (nsamp-- > 0) {
-    s = *dst;
-    s = (s * mult) >> 15;
-    *(dst++) = s;
-  }
-}
-
 static void
+float_to_s16(void *ptr, long nsamp)
-float_to_s16(void *ptr, long nsamp, float volume)
 {
   int16_t *dst = ptr;
   float *src = ptr;
-  float mult = volume * 32768;
   int s;
 
   while (nsamp-- > 0) {
+    s = lrintf(*(src++) * 32768);
-    s = lrintf(*(src++) * mult);
     if (s < -32768)
       s = -32768;
     else if (s > 32767)
@@ -128,9 +111,7 @@
         break;
       }
       if (s->conv)
+        float_to_s16(s->buf, nfr * s->pchan);
-        float_to_s16(s->buf, nfr * s->pchan, s->volume);
-      else
-        s16_setvol(s->buf, nfr * s->pchan, s->volume);
       start = 0;
       end = nfr * s->bpf;
     }
@@ -279,7 +260,6 @@
     free(s);
     return CUBEB_ERROR;
   }
-  s->volume = 1.;
   *stream = s;
   DPR("sndio_stream_init() end, ok\n");
   (void)context;
@@ -366,11 +346,7 @@
 {
   DPR("sndio_stream_set_volume(%f)\n", volume);
   pthread_mutex_lock(&s->mtx);
+  sio_setvol(s->hdl, SIO_MAXVOL * volume);
-  if (volume < 0.)
-    volume = 0.;
-  else if (volume > 1.0)
-    volume = 1.;
-  s->volume = volume;
   pthread_mutex_unlock(&s->mtx);
   return CUBEB_OK;
 }
